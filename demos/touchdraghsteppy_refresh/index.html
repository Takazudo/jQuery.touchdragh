<!doctype html>
<html class="no-js" lang="ja">
<head>
<meta charset="utf-8">
<title></title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="styles.css">
<script src="../../EveEve/eveeve.js"></script>
<script src="../../libs/jquery/1.5.1/jquery.js"></script>
<script src="../../libs/jquery.transit.js"></script>
<script src="../../jquery.touchdragh.js"></script>
<script>
$(function() {

  var console = window.console || {};
  console.log = console.log || $.noop;

  $('.box').each(function() {

    var instance;

    var $el = $(this);

    $el.touchdraghsteppy({
      inner: '.box-inner',
      item: '.item',
      stepwidth: 300,
      widthbetween: 20,
      beforefirstrefresh: function(ins) {
        instance = ins;
        instance.on('indexchange', function(data) {
          console.log('indexchange: ' + data.index);
        });
      }
    });

    $('#toWide').click(function() {
      $el.css({
        width: 300,
        height: 300
      });
      $el.find('.item').css({
        width: 300,
        marginLeft: 20
      }).filter('.first').css({
        marginLeft: 0
      });
      instance.updateOption({
        stepwidth: 300,
        widthbetween: 20
      });
    });
    $('#toSmall').click(function() {
      $el.css({
        width: 200,
        height: 200
      });
      $el.find('.item').css({
        width: 200,
        marginLeft: 15
      }).filter('.first').css({
        marginLeft: 0
      });
      instance.updateOption({
        stepwidth: 200,
        widthbetween: 15
      });
    });

  });
});
</script>
</head>
<body><div class="all">

<h1>TouchdraghSteppy refresh demo</h1>

<div class="box" id="box1">
  <div class="box-inner">
		<div class="item first">A</div>
		<div class="item"><a href="http://example.com">B</a></div>
		<div class="item"><img src="../imgs/1.jpg" alt=""></div>
		<div class="item">D</div>
		<div class="item">E</div>
		<div class="item">F</div>
		<div class="item">G</div>
		<div class="item">H</div>
		<div class="item">I</div>
  </div>
</div>

<div class="buttons">
  <button id="toSmall">small</button>
  <button id="toWide">wide</button>
</div>

</div></body>
</html>
