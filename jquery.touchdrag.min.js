var __slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},__bind=function(t,e){return function(){return t.apply(e,arguments)}};(function(t,e,n){var r,i;return this.$=t,this.window=e,this.document=n,r=t(n),i=t.TouchdragNs={},i.normalizeXY=function(t){var e,n;return e={},i.support.touch?(n=t.originalEvent.changedTouches[0],e.x=n.pageX,e.y=n.pageY):(e.x=t.pageX,e.y=t.pageY),e},i.support={},i.support.addEventListener="addEventListener"in n,i.support.touch="ontouchend"in n,i.support.mspointer=e.navigator.msPointerEnabled||!1,i.touchStartEventName=function(){return i.support.mspointer?"MSPointerDown":i.support.touch?"touchstart":"mousedown"}(),i.touchMoveEventName=function(){return i.support.mspointer?"MSPointerMove":i.support.touch?"touchmove":"mousemove"}(),i.touchEndEventName=function(){return i.support.mspointer?"MSPointerUp":i.support.touch?"touchend":"mouseup"}(),i.getLeftPx=function(t){var e;return e=t.css("left"),e="auto"===e?0:1*e.replace(/px/,"")},i.animateLeft=function(t,e,n,r){var i,o,s,h,u,a,c;return o=!1,i=+new Date,u=parseInt(t.style.left,10),c=e,s=n,h=function(t,e){return-(t/=e)*(t-2)},a=setInterval(function(){var e,n,l;return l=new Date-i,n=null,e=null,l>s?(clearInterval(a),e=c,o=!0):(n=h(l,s),e=n*(c-u)+u),t.style.left=e+"px",o&&null!=r?r():void 0},10),this},i.startWatchGestures=function(){var t,e;return e=!1,t=function(){return e=!0,r.on("gesturestart",function(){return i.whileGesture=!0}),r.on("gestureend",function(){return i.whileGesture=!1})},function(){return this.initDone?void 0:t()}}(),i.Event=function(){function t(){}return t.prototype.on=function(t,e){var n,r,i,o,s;for(null==this._callbacks&&(this._callbacks={}),n=t.split(" "),o=0,s=n.length;s>o;o++)r=n[o],(i=this._callbacks)[r]||(i[r]=[]),this._callbacks[r].push(e);return this},t.prototype.once=function(t,e){return this.on(t,function(){return this.off(t,arguments.callee),e.apply(this,arguments)})},t.prototype.trigger=function(){var t,e,n,r,i,o,s;if(t=arguments.length>=1?__slice.call(arguments,0):[],n=t.shift(),r=null!=(s=this._callbacks)?s[n]:void 0){for(i=0,o=r.length;o>i&&(e=r[i],e.apply(this,t)!==!1);i++);return this}},t.prototype.off=function(t,e){var n,r,i,o,s,h;if(!t)return this._callbacks={},this;if(i=null!=(h=this._callbacks)?h[t]:void 0,!i)return this;if(!e)return delete this._callbacks[t],this;for(r=o=0,s=i.length;s>o;r=++o)if(n=i[r],n===e){i=i.slice(),i.splice(r,1),this._callbacks[t]=i;break}return this},t}(),i.OneDrag=function(t){function e(){this._scrollDirectionDecided=!1}return __extends(e,t),e.prototype.applyTouchStart=function(t){var e;return e=i.normalizeXY(t),this.startPageX=e.x,this.startPageY=e.y,this},e.prototype.applyTouchMove=function(t){var e,n,r,o,s=this;return e=i.normalizeXY(t),o=function(){var t;return t=e.x-s.startPageX,s.trigger("dragmove",{x:t})},this._scrollDirectionDecided?o():(n=Math.abs(e.x-this.startPageX),r=Math.abs(e.y-this.startPageY),(n>5||r>5)&&(this._scrollDirectionDecided=!0,n>5?this.trigger("xscrolldetected"):r>5&&this.trigger("yscrolldetected"))),this},e.prototype.destroy=function(){return this.off(),this},e}(i.Event),i.TouchdragEl=function(e){function n(e,n){this.$el=e,this._handleTouchEnd=__bind(this._handleTouchEnd,this),this._handleTouchMove=__bind(this._handleTouchMove,this),this._handleTouchStart=__bind(this._handleTouchStart,this),this.el=this.$el[0],this.options=t.extend({},this.defaults,n),i.startWatchGestures(),this._handlePointerEvents(),this._prepareEls(),this._eventify(),this.refresh()}return __extends(n,e),n.prototype.defaults={transitionDuration:250},n.prototype.refresh=function(){return this._calcMinMaxLeft(),this._handleInnerOver(),this},n.prototype._handlePointerEvents=function(){return i.support.mspointer?(this.el.style.msTouchAction="none",this):this},n.prototype._prepareEls=function(){return this.$inner=this.$el.find(this.options.inner),this},n.prototype._calcMinMaxLeft=function(){return this._maxLeft=0,this._minLeft=-(this.$inner.outerWidth()-this.$el.innerWidth()),this},n.prototype._eventify=function(){return this.$el.on(i.touchStartEventName,this._handleTouchStart),i.support.addEventListener&&this.el.addEventListener("click",t.noop,!0),this},n.prototype._handleTouchStart=function(t){var e,n=this;return i.whileGesture?this:(i.support.touch||t.preventDefault(),this._whileDrag=!0,this._shouldSlideInner=!1,e=this._currentDrag=new i.OneDrag,e.on("yscrolldetected",function(){return n._whileDrag=!1}),e.on("xscrolldetected",function(){return n._shouldSlideInner=!0,n.trigger("touchdrag.start")}),e.on("dragmove",function(t){return n._moveInner(t.x)}),this._innerStartLeft=i.getLeftPx(this.$inner),e.applyTouchStart(t),r.on(i.touchMoveEventName,this._handleTouchMove),r.on(i.touchEndEventName,this._handleTouchEnd),this)},n.prototype._handleTouchMove=function(t){return this._whileDrag?i.whileGesture?this:(this._currentDrag.applyTouchMove(t),this._shouldSlideInner&&(t.preventDefault(),t.stopPropagation()),this):this},n.prototype._handleTouchEnd=function(){return r.off(i.touchMoveEventName,this._handleTouchMove),r.off(i.touchEndEventName,this._handleTouchEnd),this._currentDrag.destroy(),this._handleInnerOver(),this},n.prototype._moveInner=function(t){var e,n;return n=this._innerStartLeft+t,n>this._maxLeft?n=this._maxLeft+(n-this._maxLeft)/3:this._minLeft>n&&(n=this._minLeft+(n-this._minLeft)/3),this.$inner.css("left",n),e={left:n},this.trigger("touchdrag.move",e),this},n.prototype._handleInnerOver=function(){var t,e,n,r,o,s=this;return o=function(){return s.trigger("touchdrag.end")},r=null,e=i.getLeftPx(this.$inner),n=e>this._maxLeft,t=this._minLeft>e,n||t?(n&&(r=this._maxLeft),t&&(r=this._minLeft),i.animateLeft(this.$inner[0],r,this.options.transitionDuration,function(){return o()}),this):(o(),this)},n}(i.Event),t.fn.touchdrag=function(e){return this.options=null!=e?e:{},this.each(function(n,r){var o,s;return o=t(r),s=new i.TouchdragEl(o,e),o.data("touchdrag",s),this}),this},this})(jQuery,window,document);